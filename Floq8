sequenceDiagram
    autonumber

    participant User as ğŸ–¥ï¸ User (React UI)
    participant Gateway as ğŸ”‘ API Gateway (JWT Validation & Rate Limiting)
    participant DropDownService as ğŸ›ï¸ Drop Down Service (Spring Boot GraphQL)
    participant SearchService as ğŸ” Search Service (Spring Boot GraphQL)
    participant PDFViewService as ğŸ“„ PDF View Service (Spring Boot GraphQL)
    participant UpdateService as ğŸ”„ Update Service (Spring Boot GraphQL)
    participant Database as ğŸ—„ï¸ SQL Server

    %% User logs in and generates a JWT Token (Only Once)
    User->>Gateway: Request login credentials
    Gateway->>Gateway: Validate User & Generate JWT Token
    Gateway-->>User: âœ… Return JWT Token

    %% User sends API requests with the same JWT Token
    User->>Gateway: Call Drop Down/Search/PDF/Update Service (with JWT)
    Gateway->>Gateway: Validate JWT Token (No New Auth Calls)

    %% Drop Down Service (Independent)
    User->>Gateway: Request Drop Down Data
    Gateway->>DropDownService: Forward Request
    DropDownService->>Database: Fetch Data
    Database-->>DropDownService: âœ… Return Data / âŒ 5XX Error
    DropDownService-->>Gateway: âœ… Return Data / âŒ 5XX Error
    Gateway-->>User: âœ… Return Data / âŒ Error

    %% Search Service (Independent)
    User->>Gateway: Request Search Data
    Gateway->>SearchService: Forward Request
    SearchService->>Database: Query Data
    Database-->>SearchService: âœ… Return Data / âŒ 5XX Error
    SearchService-->>Gateway: âœ… Return Data / âŒ 5XX Error
    Gateway-->>User: âœ… Return Data / âŒ Error

    %% PDF View Service (Independent)
    User->>Gateway: Request PDF Data
    Gateway->>PDFViewService: Forward Request
    PDFViewService->>Database: Retrieve Data
    Database-->>PDFViewService: âœ… Return Data / âŒ 404 Not Found
    PDFViewService-->>Gateway: âœ… Return Data / âŒ 404 Not Found
    Gateway-->>User: âœ… Return Data / âŒ Error

    %% Update Service (Independent)
    User->>Gateway: Update Data Request
    Gateway->>UpdateService: Forward Request
    UpdateService->>Database: Modify Data
    Database-->>UpdateService: âœ… Confirm Update / âŒ 400 Constraint Violation
    UpdateService-->>Gateway: âœ… Return Success / âŒ 400 Error
    Gateway-->>User: âœ… Return Success / âŒ Error
